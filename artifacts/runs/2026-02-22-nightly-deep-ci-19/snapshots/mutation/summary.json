{
  "status": "pass",
  "startedAt": "2026-02-22T17:07:06.616Z",
  "generatedAt": "2026-02-22T17:07:16.317Z",
  "totalMutants": 9,
  "killedMutants": 9,
  "survivedMutants": 0,
  "mutationScore": 1,
  "threshold": 1,
  "passed": true,
  "mutants": [
    {
      "mutantId": "MUT-AW-ANY-ALL-INVERSION",
      "description": "ANY/ALL 分岐反転",
      "killed": true,
      "exitCode": 1,
      "durationMs": 1113,
      "command": "pnpm exec vitest run tests/acceptance/approval-engine.acceptance.test.ts -t AW-ACC-01",
      "stdoutTail": "RUN  v3.2.4 /home/runner/work/ae-framework-test-05-Approval-Workflow-Service/ae-framework-test-05-Approval-Workflow-Service\n\n ❯ tests/acceptance/approval-engine.acceptance.test.ts (14 tests | 1 failed | 13 skipped) 23ms\n   × Approval Workflow Acceptance > AW-ACC-01: ANY step simultaneous approvals complete step once without duplicate next-step tasks 22ms\n     → expected +0 to be 1 // Object.is equality\n   ↓ Approval Workflow Acceptance > AW-ACC-02: a single reject moves request to REJECTED and closes all pending tasks\n   ↓ Approval Workflow Acceptance > AW-ACC-03: submit/decide operations are rejected after terminal state\n   ↓ Approval Workflow Acceptance > AW-AUTH-001: request detail is visible only to requester assignee and admin\n   ↓ Approval Workflow Acceptance > AW-AUTH-002: task decision is denied for non-assignee\n   ↓ Approval Workflow Acceptance > AW-TENANT-001: cross-tenant access to request and task is denied\n   ↓ Approval Workflow Acceptance > AW-REQ-EDIT-01: request update is allowed in DRAFT and denied in IN_REVIEW\n   ↓ Approval Workflow Acceptance > AW-REQ-002: submit validates required fields (title/amount/currency)\n   ↓ Approval Workflow Acceptance > AW-REQ-RETURN-01: RETURN moves request to RETURNED and resubmit regenerates first-step tasks\n   ↓ Approval Workflow Acceptance > AW-WF-003: fixed workflow/version remains unchanged on resubmit after RETURN\n   ↓ Approval Workflow Acceptance > AW-AUD-001: withdraw/cancel actions are recorded in audit logs\n   ↓ Approval Workflow Acceptance > AW-WF-002: highest priority active workflow is selected on submit\n   ↓ Approval Workflow Acceptance > AW-WF-010: submit is rejected when approver selector resolves no users\n   ↓ Approval Workflow Acceptance > AW-ACC-04: audit log keeps submit to final decision trace\n\n Test Files  1 failed (1)\n      Tests  1 failed | 13 skipped (14)\n   Start at  17:07:07\n   Duration  407ms (transform 118ms, setup 0ms, collect 121ms, tests 23ms, environment 0ms, prepare 81ms)\n\n\n::error file=/home/runner/work/ae-framework-test-05-Approval-Workflow-Service/ae-framework-test-05-Approval-Workflow-Service/tests/acceptance/approval-engine.acceptance.test.ts,title=tests/acceptance/approval-engine.acceptance.test.ts > Approval Workflow Acceptance > AW-ACC-01%3A ANY step simultaneous approvals complete step once without duplicate next-step tasks,line=82,column=27::AssertionError: expected +0 to be 1 // Object.is equality%0A%0A- Expected%0A+ Received%0A%0A- 1%0A+ 0%0A%0A ❯ tests/acceptance/approval-engine.acceptance.test.ts:82:27%0A%0A",
      "stderrTail": "⎯⎯⎯⎯⎯⎯⎯ Failed Tests 1 ⎯⎯⎯⎯⎯⎯⎯\n\n FAIL  tests/acceptance/approval-engine.acceptance.test.ts > Approval Workflow Acceptance > AW-ACC-01: ANY step simultaneous approvals complete step once without duplicate next-step tasks\nAssertionError: expected +0 to be 1 // Object.is equality\n\n- Expected\n+ Received\n\n- 1\n+ 0\n\n ❯ tests/acceptance/approval-engine.acceptance.test.ts:82:27\n     80|     const settled = [r1, r2];\n     81|     const rejectedCount = settled.filter((item) => item.status === 're…\n     82|     expect(rejectedCount).toBe(1);\n       |                           ^\n     83| \n     84|     const updatedRequest = engine.getRequest(request.requestId, admin);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯"
    },
    {
      "mutantId": "MUT-AW-TERMINAL-GUARD-DROP",
      "description": "終端状態ガードの欠落（decideTask）",
      "killed": true,
      "exitCode": 1,
      "durationMs": 1082,
      "command": "pnpm exec vitest run tests/acceptance/approval-engine.acceptance.test.ts -t AW-ACC-03",
      "stdoutTail": "RUN  v3.2.4 /home/runner/work/ae-framework-test-05-Approval-Workflow-Service/ae-framework-test-05-Approval-Workflow-Service\n\n ❯ tests/acceptance/approval-engine.acceptance.test.ts (14 tests | 1 failed | 13 skipped) 17ms\n   ↓ Approval Workflow Acceptance > AW-ACC-01: ANY step simultaneous approvals complete step once without duplicate next-step tasks\n   ↓ Approval Workflow Acceptance > AW-ACC-02: a single reject moves request to REJECTED and closes all pending tasks\n   × Approval Workflow Acceptance > AW-ACC-03: submit/decide operations are rejected after terminal state 16ms\n     → expected Error: task decision is not allowed in st… { …(2) } to match object { message: StringContaining{…} }\n(2 matching properties omitted from actual)\n   ↓ Approval Workflow Acceptance > AW-AUTH-001: request detail is visible only to requester assignee and admin\n   ↓ Approval Workflow Acceptance > AW-AUTH-002: task decision is denied for non-assignee\n   ↓ Approval Workflow Acceptance > AW-TENANT-001: cross-tenant access to request and task is denied\n   ↓ Approval Workflow Acceptance > AW-REQ-EDIT-01: request update is allowed in DRAFT and denied in IN_REVIEW\n   ↓ Approval Workflow Acceptance > AW-REQ-002: submit validates required fields (title/amount/currency)\n   ↓ Approval Workflow Acceptance > AW-REQ-RETURN-01: RETURN moves request to RETURNED and resubmit regenerates first-step tasks\n   ↓ Approval Workflow Acceptance > AW-WF-003: fixed workflow/version remains unchanged on resubmit after RETURN\n   ↓ Approval Workflow Acceptance > AW-AUD-001: withdraw/cancel actions are recorded in audit logs\n   ↓ Approval Workflow Acceptance > AW-WF-002: highest priority active workflow is selected on submit\n   ↓ Approval Workflow Acceptance > AW-WF-010: submit is rejected when approver selector resolves no users\n   ↓ Approval Workflow Acceptance > AW-ACC-04: audit log keeps submit to final decision trace\n\n Test Files  1 failed (1)\n      Tests  1 failed | 13 skipped (14)\n   Start at  17:07:08\n   Duration  393ms (transform 107ms, setup 0ms, collect 113ms, tests 17ms, environment 0ms, prepare 80ms)\n\n\n::error file=/home/runner/work/ae-framework-test-05-Approval-Workflow-Service/ae-framework-test-05-Approval-Workflow-Service/tests/acceptance/approval-engine.acceptance.test.ts,title=tests/acceptance/approval-engine.acceptance.test.ts > Approval Workflow Acceptance > AW-ACC-03%3A submit/decide operations are rejected after terminal state,line=183,column=5::AssertionError: expected Error: task decision is not allowed in st… { …(2) } to match object { message: StringContaining{…} }%0A(2 matching properties omitted from actual)%0A%0A- Expected%0A+ Received%0A%0A- {%0A-   \"message\": StringContaining \"request is terminal\",%0A+ ConflictError {%0A+   \"message\": \"task decision is not allowed in status: APPROVED\",%0A+   \"code\": \"CONFLICT\",%0A+   \"statusCode\": 409,%0A  }%0A%0A ❯ tests/acceptance/approval-engine.acceptance.test.ts:183:5%0A%0A",
      "stderrTail": "⎯⎯⎯⎯⎯⎯⎯ Failed Tests 1 ⎯⎯⎯⎯⎯⎯⎯\n\n FAIL  tests/acceptance/approval-engine.acceptance.test.ts > Approval Workflow Acceptance > AW-ACC-03: submit/decide operations are rejected after terminal state\nAssertionError: expected Error: task decision is not allowed in st… { …(2) } to match object { message: StringContaining{…} }\n(2 matching properties omitted from actual)\n\n- Expected\n+ Received\n\n- {\n-   \"message\": StringContaining \"request is terminal\",\n+ ConflictError {\n+   \"message\": \"task decision is not allowed in status: APPROVED\",\n+   \"code\": \"CONFLICT\",\n+   \"statusCode\": 409,\n  }\n\n ❯ tests/acceptance/approval-engine.acceptance.test.ts:183:5\n    181|       message: expect.stringContaining('request is terminal')\n    182|     });\n    183|     await expect(engine.decideTask(task!.taskId, approver, 'APPROVE', …\n       |     ^\n    184|       message: expect.stringContaining('request is terminal')\n    185|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯"
    },
    {
      "mutantId": "MUT-AW-ASSIGNEE-GUARD-DROP",
      "description": "assignee チェック欠落",
      "killed": true,
      "exitCode": 1,
      "durationMs": 1088,
      "command": "pnpm exec vitest run tests/acceptance/approval-engine.acceptance.test.ts -t AW-AUTH-002",
      "stdoutTail": "RUN  v3.2.4 /home/runner/work/ae-framework-test-05-Approval-Workflow-Service/ae-framework-test-05-Approval-Workflow-Service\n\n ❯ tests/acceptance/approval-engine.acceptance.test.ts (14 tests | 1 failed | 13 skipped) 18ms\n   ↓ Approval Workflow Acceptance > AW-ACC-01: ANY step simultaneous approvals complete step once without duplicate next-step tasks\n   ↓ Approval Workflow Acceptance > AW-ACC-02: a single reject moves request to REJECTED and closes all pending tasks\n   ↓ Approval Workflow Acceptance > AW-ACC-03: submit/decide operations are rejected after terminal state\n   ↓ Approval Workflow Acceptance > AW-AUTH-001: request detail is visible only to requester assignee and admin\n   × Approval Workflow Acceptance > AW-AUTH-002: task decision is denied for non-assignee 16ms\n     → promise resolved \"{ request: { …(16) }, task: { …(11) } }\" instead of rejecting\n   ↓ Approval Workflow Acceptance > AW-TENANT-001: cross-tenant access to request and task is denied\n   ↓ Approval Workflow Acceptance > AW-REQ-EDIT-01: request update is allowed in DRAFT and denied in IN_REVIEW\n   ↓ Approval Workflow Acceptance > AW-REQ-002: submit validates required fields (title/amount/currency)\n   ↓ Approval Workflow Acceptance > AW-REQ-RETURN-01: RETURN moves request to RETURNED and resubmit regenerates first-step tasks\n   ↓ Approval Workflow Acceptance > AW-WF-003: fixed workflow/version remains unchanged on resubmit after RETURN\n   ↓ Approval Workflow Acceptance > AW-AUD-001: withdraw/cancel actions are recorded in audit logs\n   ↓ Approval Workflow Acceptance > AW-WF-002: highest priority active workflow is selected on submit\n   ↓ Approval Workflow Acceptance > AW-WF-010: submit is rejected when approver selector resolves no users\n   ↓ Approval Workflow Acceptance > AW-ACC-04: audit log keeps submit to final decision trace\n\n Test Files  1 failed (1)\n      Tests  1 failed | 13 skipped (14)\n   Start at  17:07:09\n   Duration  390ms (transform 107ms, setup 0ms, collect 112ms, tests 18ms, environment 0ms, prepare 79ms)\n\n\n::error file=/home/runner/work/ae-framework-test-05-Approval-Workflow-Service/ae-framework-test-05-Approval-Workflow-Service/tests/acceptance/approval-engine.acceptance.test.ts,title=tests/acceptance/approval-engine.acceptance.test.ts > Approval Workflow Acceptance > AW-AUTH-002%3A task decision is denied for non-assignee,line=245,column=80::AssertionError: promise resolved \"{ request: { …(16) }, task: { …(11) } }\" instead of rejecting%0A%0A- Expected%0A+ Received%0A%0A- Error {%0A-   \"message\": \"rejected promise\",%0A+ {%0A+   \"request\": {%0A+     \"amount\": 12345,%0A+     \"createdAt\": \"2026-02-22T17:07:09.739Z\",%0A+     \"currency\": \"JPY\",%0A+     \"currentStepIndex\": 0,%0A+     \"decidedAt\": \"2026-02-22T17:07:09.741Z\",%0A+     \"description\": null,%0A+     \"requestId\": \"req_4ab64951-fb8d-4231-a7e4-f1a977f677f4\",%0A+     \"requesterUserId\": \"requester-01\",%0A+     \"status\": \"APPROVED\",%0A+     \"submittedAt\": \"2026-02-22T17:07:09.739Z\",%0A+     \"tenantId\": \"tenant-acme\",%0A+     \"title\": \"Auth Guard\",%0A+     \"type\": \"GENERIC\",%0A+     \"updatedAt\": \"2026-02-22T17:07:09.741Z\",%0A+     \"workflowId\": \"wf-auth\",%0A+     \"workflowVersion\": 1,%0A+   },%0A+   \"task\": {%0A+     \"assigneeUserId\": \"approver-01\",%0A+     \"createdAt\": \"2026-02-22T17:07:09.740Z\",%0A+     \"decidedAt\": \"2026-02-22T17:07:09.740Z\",%0A+     \"decisionComment\": \"hijack\",%0A+     \"requestId\": \"req_4ab64951-fb8d-4231-a7e4-f1a977f677f4\",%0A+     \"status\": \"APPROVED\",%0A+     \"stepId\": \"step-1\",%0A+     \"stepIndex\": 0,%0A+     \"taskId\": \"task_f2527eeb-8fb3-4313-8c33-2790f6d4c484\",%0A+     \"tenantId\": \"tenant-acme\",%0A+     \"updatedAt\": \"2026-02-22T17:07:09.740Z\",%0A+   },%0A  }%0A%0A ❯ tests/acceptance/approval-engine.acceptance.test.ts:245:80%0A%0A",
      "stderrTail": "+     \"title\": \"Auth Guard\",\n+     \"type\": \"GENERIC\",\n+     \"updatedAt\": \"2026-02-22T17:07:09.741Z\",\n+     \"workflowId\": \"wf-auth\",\n+     \"workflowVersion\": 1,\n+   },\n+   \"task\": {\n+     \"assigneeUserId\": \"approver-01\",\n+     \"createdAt\": \"2026-02-22T17:07:09.740Z\",\n+     \"decidedAt\": \"2026-02-22T17:07:09.740Z\",\n+     \"decisionComment\": \"hijack\",\n+     \"requestId\": \"req_4ab64951-fb8d-4231-a7e4-f1a977f677f4\",\n+     \"status\": \"APPROVED\",\n+     \"stepId\": \"step-1\",\n+     \"stepIndex\": 0,\n+     \"taskId\": \"task_f2527eeb-8fb3-4313-8c33-2790f6d4c484\",\n+     \"tenantId\": \"tenant-acme\",\n+     \"updatedAt\": \"2026-02-22T17:07:09.740Z\",\n+   },\n  }\n\n ❯ tests/acceptance/approval-engine.acceptance.test.ts:245:80\n    243| \n    244|     const task = engine.listTasks(admin, { requestId: request.requestI…\n    245|     await expect(engine.decideTask(task!.taskId, intruder, 'APPROVE', …\n       |                                                                                ^\n    246|       ForbiddenError\n    247|     );\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯"
    },
    {
      "mutantId": "MUT-AW-REQUEST-VIEW-GUARD-DROP",
      "description": "request閲覧ガードの欠落",
      "killed": true,
      "exitCode": 1,
      "durationMs": 1076,
      "command": "pnpm exec vitest run tests/acceptance/approval-engine.acceptance.test.ts -t AW-AUTH-001",
      "stdoutTail": "RUN  v3.2.4 /home/runner/work/ae-framework-test-05-Approval-Workflow-Service/ae-framework-test-05-Approval-Workflow-Service\n\n ❯ tests/acceptance/approval-engine.acceptance.test.ts (14 tests | 1 failed | 13 skipped) 11ms\n   ↓ Approval Workflow Acceptance > AW-ACC-01: ANY step simultaneous approvals complete step once without duplicate next-step tasks\n   ↓ Approval Workflow Acceptance > AW-ACC-02: a single reject moves request to REJECTED and closes all pending tasks\n   ↓ Approval Workflow Acceptance > AW-ACC-03: submit/decide operations are rejected after terminal state\n   × Approval Workflow Acceptance > AW-AUTH-001: request detail is visible only to requester assignee and admin 10ms\n     → expected function to throw an error, but it didn't\n   ↓ Approval Workflow Acceptance > AW-AUTH-002: task decision is denied for non-assignee\n   ↓ Approval Workflow Acceptance > AW-TENANT-001: cross-tenant access to request and task is denied\n   ↓ Approval Workflow Acceptance > AW-REQ-EDIT-01: request update is allowed in DRAFT and denied in IN_REVIEW\n   ↓ Approval Workflow Acceptance > AW-REQ-002: submit validates required fields (title/amount/currency)\n   ↓ Approval Workflow Acceptance > AW-REQ-RETURN-01: RETURN moves request to RETURNED and resubmit regenerates first-step tasks\n   ↓ Approval Workflow Acceptance > AW-WF-003: fixed workflow/version remains unchanged on resubmit after RETURN\n   ↓ Approval Workflow Acceptance > AW-AUD-001: withdraw/cancel actions are recorded in audit logs\n   ↓ Approval Workflow Acceptance > AW-WF-002: highest priority active workflow is selected on submit\n   ↓ Approval Workflow Acceptance > AW-WF-010: submit is rejected when approver selector resolves no users\n   ↓ Approval Workflow Acceptance > AW-ACC-04: audit log keeps submit to final decision trace\n\n Test Files  1 failed (1)\n      Tests  1 failed | 13 skipped (14)\n   Start at  17:07:10\n   Duration  388ms (transform 108ms, setup 0ms, collect 114ms, tests 11ms, environment 0ms, prepare 83ms)\n\n\n::error file=/home/runner/work/ae-framework-test-05-Approval-Workflow-Service/ae-framework-test-05-Approval-Workflow-Service/tests/acceptance/approval-engine.acceptance.test.ts,title=tests/acceptance/approval-engine.acceptance.test.ts > Approval Workflow Acceptance > AW-AUTH-001%3A request detail is visible only to requester assignee and admin,line=216,column=66::AssertionError: expected function to throw an error, but it didn't%0A ❯ tests/acceptance/approval-engine.acceptance.test.ts:216:66%0A%0A",
      "stderrTail": "⎯⎯⎯⎯⎯⎯⎯ Failed Tests 1 ⎯⎯⎯⎯⎯⎯⎯\n\n FAIL  tests/acceptance/approval-engine.acceptance.test.ts > Approval Workflow Acceptance > AW-AUTH-001: request detail is visible only to requester assignee and admin\nAssertionError: expected function to throw an error, but it didn't\n ❯ tests/acceptance/approval-engine.acceptance.test.ts:216:66\n    214|     expect(engine.getRequest(request.requestId, approver).requestId).t…\n    215|     expect(engine.getRequest(request.requestId, admin).requestId).toBe…\n    216|     expect(() => engine.getRequest(request.requestId, intruder)).toThr…\n       |                                                                  ^\n    217|   });\n    218| \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯"
    },
    {
      "mutantId": "MUT-AW-TENANT-GUARD-DROP",
      "description": "tenant分離ガードの欠落",
      "killed": true,
      "exitCode": 1,
      "durationMs": 1059,
      "command": "pnpm exec vitest run tests/acceptance/approval-engine.acceptance.test.ts -t AW-TENANT-001",
      "stdoutTail": "RUN  v3.2.4 /home/runner/work/ae-framework-test-05-Approval-Workflow-Service/ae-framework-test-05-Approval-Workflow-Service\n\n ❯ tests/acceptance/approval-engine.acceptance.test.ts (14 tests | 1 failed | 13 skipped) 12ms\n   ↓ Approval Workflow Acceptance > AW-ACC-01: ANY step simultaneous approvals complete step once without duplicate next-step tasks\n   ↓ Approval Workflow Acceptance > AW-ACC-02: a single reject moves request to REJECTED and closes all pending tasks\n   ↓ Approval Workflow Acceptance > AW-ACC-03: submit/decide operations are rejected after terminal state\n   ↓ Approval Workflow Acceptance > AW-AUTH-001: request detail is visible only to requester assignee and admin\n   ↓ Approval Workflow Acceptance > AW-AUTH-002: task decision is denied for non-assignee\n   × Approval Workflow Acceptance > AW-TENANT-001: cross-tenant access to request and task is denied 11ms\n     → expected function to throw an error, but it didn't\n   ↓ Approval Workflow Acceptance > AW-REQ-EDIT-01: request update is allowed in DRAFT and denied in IN_REVIEW\n   ↓ Approval Workflow Acceptance > AW-REQ-002: submit validates required fields (title/amount/currency)\n   ↓ Approval Workflow Acceptance > AW-REQ-RETURN-01: RETURN moves request to RETURNED and resubmit regenerates first-step tasks\n   ↓ Approval Workflow Acceptance > AW-WF-003: fixed workflow/version remains unchanged on resubmit after RETURN\n   ↓ Approval Workflow Acceptance > AW-AUD-001: withdraw/cancel actions are recorded in audit logs\n   ↓ Approval Workflow Acceptance > AW-WF-002: highest priority active workflow is selected on submit\n   ↓ Approval Workflow Acceptance > AW-WF-010: submit is rejected when approver selector resolves no users\n   ↓ Approval Workflow Acceptance > AW-ACC-04: audit log keeps submit to final decision trace\n\n Test Files  1 failed (1)\n      Tests  1 failed | 13 skipped (14)\n   Start at  17:07:11\n   Duration  372ms (transform 112ms, setup 0ms, collect 114ms, tests 12ms, environment 0ms, prepare 73ms)\n\n\n::error file=/home/runner/work/ae-framework-test-05-Approval-Workflow-Service/ae-framework-test-05-Approval-Workflow-Service/tests/acceptance/approval-engine.acceptance.test.ts,title=tests/acceptance/approval-engine.acceptance.test.ts > Approval Workflow Acceptance > AW-TENANT-001%3A cross-tenant access to request and task is denied,line=281,column=78::AssertionError: expected function to throw an error, but it didn't%0A ❯ tests/acceptance/approval-engine.acceptance.test.ts:281:78%0A%0A",
      "stderrTail": "⎯⎯⎯⎯⎯⎯⎯ Failed Tests 1 ⎯⎯⎯⎯⎯⎯⎯\n\n FAIL  tests/acceptance/approval-engine.acceptance.test.ts > Approval Workflow Acceptance > AW-TENANT-001: cross-tenant access to request and task is denied\nAssertionError: expected function to throw an error, but it didn't\n ❯ tests/acceptance/approval-engine.acceptance.test.ts:281:78\n    279| \n    280|     const pendingTask = engine.listTasks(admin, { requestId: request.r…\n    281|     expect(() => engine.getRequest(request.requestId, crossTenantReque…\n       |                                                                              ^\n    282|     await expect(\n    283|       engine.decideTask(pendingTask!.taskId, crossTenantApprover, 'APP…\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯"
    },
    {
      "mutantId": "MUT-AW-WF-PRIORITY-ORDER-BROKEN",
      "description": "workflow priority 比較順の逆転",
      "killed": true,
      "exitCode": 1,
      "durationMs": 1072,
      "command": "pnpm exec vitest run tests/acceptance/approval-engine.acceptance.test.ts -t AW-WF-002",
      "stdoutTail": "RUN  v3.2.4 /home/runner/work/ae-framework-test-05-Approval-Workflow-Service/ae-framework-test-05-Approval-Workflow-Service\n\n ❯ tests/acceptance/approval-engine.acceptance.test.ts (14 tests | 1 failed | 13 skipped) 12ms\n   ↓ Approval Workflow Acceptance > AW-ACC-01: ANY step simultaneous approvals complete step once without duplicate next-step tasks\n   ↓ Approval Workflow Acceptance > AW-ACC-02: a single reject moves request to REJECTED and closes all pending tasks\n   ↓ Approval Workflow Acceptance > AW-ACC-03: submit/decide operations are rejected after terminal state\n   ↓ Approval Workflow Acceptance > AW-AUTH-001: request detail is visible only to requester assignee and admin\n   ↓ Approval Workflow Acceptance > AW-AUTH-002: task decision is denied for non-assignee\n   ↓ Approval Workflow Acceptance > AW-TENANT-001: cross-tenant access to request and task is denied\n   ↓ Approval Workflow Acceptance > AW-REQ-EDIT-01: request update is allowed in DRAFT and denied in IN_REVIEW\n   ↓ Approval Workflow Acceptance > AW-REQ-002: submit validates required fields (title/amount/currency)\n   ↓ Approval Workflow Acceptance > AW-REQ-RETURN-01: RETURN moves request to RETURNED and resubmit regenerates first-step tasks\n   ↓ Approval Workflow Acceptance > AW-WF-003: fixed workflow/version remains unchanged on resubmit after RETURN\n   ↓ Approval Workflow Acceptance > AW-AUD-001: withdraw/cancel actions are recorded in audit logs\n   × Approval Workflow Acceptance > AW-WF-002: highest priority active workflow is selected on submit 11ms\n     → expected 'wf-low-priority' to be 'wf-high-priority' // Object.is equality\n   ↓ Approval Workflow Acceptance > AW-WF-010: submit is rejected when approver selector resolves no users\n   ↓ Approval Workflow Acceptance > AW-ACC-04: audit log keeps submit to final decision trace\n\n Test Files  1 failed (1)\n      Tests  1 failed | 13 skipped (14)\n   Start at  17:07:12\n   Duration  382ms (transform 112ms, setup 0ms, collect 120ms, tests 12ms, environment 0ms, prepare 76ms)\n\n\n::error file=/home/runner/work/ae-framework-test-05-Approval-Workflow-Service/ae-framework-test-05-Approval-Workflow-Service/tests/acceptance/approval-engine.acceptance.test.ts,title=tests/acceptance/approval-engine.acceptance.test.ts > Approval Workflow Acceptance > AW-WF-002%3A highest priority active workflow is selected on submit,line=590,column=34::AssertionError: expected 'wf-low-priority' to be 'wf-high-priority' // Object.is equality%0A%0AExpected: \"wf-high-priority\"%0AReceived: \"wf-low-priority\"%0A%0A ❯ tests/acceptance/approval-engine.acceptance.test.ts:590:34%0A%0A",
      "stderrTail": "⎯⎯⎯⎯⎯⎯⎯ Failed Tests 1 ⎯⎯⎯⎯⎯⎯⎯\n\n FAIL  tests/acceptance/approval-engine.acceptance.test.ts > Approval Workflow Acceptance > AW-WF-002: highest priority active workflow is selected on submit\nAssertionError: expected 'wf-low-priority' to be 'wf-high-priority' // Object.is equality\n\nExpected: \"wf-high-priority\"\nReceived: \"wf-low-priority\"\n\n ❯ tests/acceptance/approval-engine.acceptance.test.ts:590:34\n    588|     );\n    589|     const submitted = await engine.submitRequest(created.requestId, re…\n    590|     expect(submitted.workflowId).toBe('wf-high-priority');\n       |                                  ^\n    591| \n    592|     const tasks = engine.listTasks(admin, { requestId: created.request…\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯"
    },
    {
      "mutantId": "MUT-AW-WF-NO-APPROVER-GUARD-DROP",
      "description": "submit時の approver 未解決ガード欠落",
      "killed": true,
      "exitCode": 1,
      "durationMs": 1064,
      "command": "pnpm exec vitest run tests/acceptance/approval-engine.acceptance.test.ts -t AW-WF-010",
      "stdoutTail": "RUN  v3.2.4 /home/runner/work/ae-framework-test-05-Approval-Workflow-Service/ae-framework-test-05-Approval-Workflow-Service\n\n ❯ tests/acceptance/approval-engine.acceptance.test.ts (14 tests | 1 failed | 13 skipped) 13ms\n   ↓ Approval Workflow Acceptance > AW-ACC-01: ANY step simultaneous approvals complete step once without duplicate next-step tasks\n   ↓ Approval Workflow Acceptance > AW-ACC-02: a single reject moves request to REJECTED and closes all pending tasks\n   ↓ Approval Workflow Acceptance > AW-ACC-03: submit/decide operations are rejected after terminal state\n   ↓ Approval Workflow Acceptance > AW-AUTH-001: request detail is visible only to requester assignee and admin\n   ↓ Approval Workflow Acceptance > AW-AUTH-002: task decision is denied for non-assignee\n   ↓ Approval Workflow Acceptance > AW-TENANT-001: cross-tenant access to request and task is denied\n   ↓ Approval Workflow Acceptance > AW-REQ-EDIT-01: request update is allowed in DRAFT and denied in IN_REVIEW\n   ↓ Approval Workflow Acceptance > AW-REQ-002: submit validates required fields (title/amount/currency)\n   ↓ Approval Workflow Acceptance > AW-REQ-RETURN-01: RETURN moves request to RETURNED and resubmit regenerates first-step tasks\n   ↓ Approval Workflow Acceptance > AW-WF-003: fixed workflow/version remains unchanged on resubmit after RETURN\n   ↓ Approval Workflow Acceptance > AW-AUD-001: withdraw/cancel actions are recorded in audit logs\n   ↓ Approval Workflow Acceptance > AW-WF-002: highest priority active workflow is selected on submit\n   × Approval Workflow Acceptance > AW-WF-010: submit is rejected when approver selector resolves no users 12ms\n     → expected 'SUBMITTED' to be 'DRAFT' // Object.is equality\n   ↓ Approval Workflow Acceptance > AW-ACC-04: audit log keeps submit to final decision trace\n\n Test Files  1 failed (1)\n      Tests  1 failed | 13 skipped (14)\n   Start at  17:07:13\n   Duration  375ms (transform 106ms, setup 0ms, collect 117ms, tests 13ms, environment 0ms, prepare 72ms)\n\n\n::error file=/home/runner/work/ae-framework-test-05-Approval-Workflow-Service/ae-framework-test-05-Approval-Workflow-Service/tests/acceptance/approval-engine.acceptance.test.ts,title=tests/acceptance/approval-engine.acceptance.test.ts > Approval Workflow Acceptance > AW-WF-010%3A submit is rejected when approver selector resolves no users,line=620,column=64::AssertionError: expected 'SUBMITTED' to be 'DRAFT' // Object.is equality%0A%0AExpected: \"DRAFT\"%0AReceived: \"SUBMITTED\"%0A%0A ❯ tests/acceptance/approval-engine.acceptance.test.ts:620:64%0A%0A",
      "stderrTail": "⎯⎯⎯⎯⎯⎯⎯ Failed Tests 1 ⎯⎯⎯⎯⎯⎯⎯\n\n FAIL  tests/acceptance/approval-engine.acceptance.test.ts > Approval Workflow Acceptance > AW-WF-010: submit is rejected when approver selector resolves no users\nAssertionError: expected 'SUBMITTED' to be 'DRAFT' // Object.is equality\n\nExpected: \"DRAFT\"\nReceived: \"SUBMITTED\"\n\n ❯ tests/acceptance/approval-engine.acceptance.test.ts:620:64\n    618| \n    619|     await expect(engine.submitRequest(created.requestId, requester)).r…\n    620|     expect(engine.getRequest(created.requestId, admin).status).toBe('D…\n       |                                                                ^\n    621|     expect(engine.listTasks(admin, { requestId: created.requestId })).…\n    622|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯"
    },
    {
      "mutantId": "MUT-AW-RETURN-TO-REJECT",
      "description": "RETURN 決裁を REJECT 終端に誤変更",
      "killed": true,
      "exitCode": 1,
      "durationMs": 1078,
      "command": "pnpm exec vitest run tests/acceptance/approval-engine.acceptance.test.ts -t AW-REQ-RETURN-01",
      "stdoutTail": "RUN  v3.2.4 /home/runner/work/ae-framework-test-05-Approval-Workflow-Service/ae-framework-test-05-Approval-Workflow-Service\n\n ❯ tests/acceptance/approval-engine.acceptance.test.ts (14 tests | 1 failed | 13 skipped) 20ms\n   ↓ Approval Workflow Acceptance > AW-ACC-01: ANY step simultaneous approvals complete step once without duplicate next-step tasks\n   ↓ Approval Workflow Acceptance > AW-ACC-02: a single reject moves request to REJECTED and closes all pending tasks\n   ↓ Approval Workflow Acceptance > AW-ACC-03: submit/decide operations are rejected after terminal state\n   ↓ Approval Workflow Acceptance > AW-AUTH-001: request detail is visible only to requester assignee and admin\n   ↓ Approval Workflow Acceptance > AW-AUTH-002: task decision is denied for non-assignee\n   ↓ Approval Workflow Acceptance > AW-TENANT-001: cross-tenant access to request and task is denied\n   ↓ Approval Workflow Acceptance > AW-REQ-EDIT-01: request update is allowed in DRAFT and denied in IN_REVIEW\n   ↓ Approval Workflow Acceptance > AW-REQ-002: submit validates required fields (title/amount/currency)\n   × Approval Workflow Acceptance > AW-REQ-RETURN-01: RETURN moves request to RETURNED and resubmit regenerates first-step tasks 19ms\n     → expected 'REJECTED' to be 'RETURNED' // Object.is equality\n   ↓ Approval Workflow Acceptance > AW-WF-003: fixed workflow/version remains unchanged on resubmit after RETURN\n   ↓ Approval Workflow Acceptance > AW-AUD-001: withdraw/cancel actions are recorded in audit logs\n   ↓ Approval Workflow Acceptance > AW-WF-002: highest priority active workflow is selected on submit\n   ↓ Approval Workflow Acceptance > AW-WF-010: submit is rejected when approver selector resolves no users\n   ↓ Approval Workflow Acceptance > AW-ACC-04: audit log keeps submit to final decision trace\n\n Test Files  1 failed (1)\n      Tests  1 failed | 13 skipped (14)\n   Start at  17:07:14\n   Duration  390ms (transform 106ms, setup 0ms, collect 116ms, tests 20ms, environment 0ms, prepare 73ms)\n\n\n::error file=/home/runner/work/ae-framework-test-05-Approval-Workflow-Service/ae-framework-test-05-Approval-Workflow-Service/tests/acceptance/approval-engine.acceptance.test.ts,title=tests/acceptance/approval-engine.acceptance.test.ts > Approval Workflow Acceptance > AW-REQ-RETURN-01%3A RETURN moves request to RETURNED and resubmit regenerates first-step tasks,line=446,column=29::AssertionError: expected 'REJECTED' to be 'RETURNED' // Object.is equality%0A%0AExpected: \"RETURNED\"%0AReceived: \"REJECTED\"%0A%0A ❯ tests/acceptance/approval-engine.acceptance.test.ts:446:29%0A%0A",
      "stderrTail": "⎯⎯⎯⎯⎯⎯⎯ Failed Tests 1 ⎯⎯⎯⎯⎯⎯⎯\n\n FAIL  tests/acceptance/approval-engine.acceptance.test.ts > Approval Workflow Acceptance > AW-REQ-RETURN-01: RETURN moves request to RETURNED and resubmit regenerates first-step tasks\nAssertionError: expected 'REJECTED' to be 'RETURNED' // Object.is equality\n\nExpected: \"RETURNED\"\nReceived: \"REJECTED\"\n\n ❯ tests/acceptance/approval-engine.acceptance.test.ts:446:29\n    444| \n    445|     const returned = engine.getRequest(created.requestId, admin);\n    446|     expect(returned.status).toBe('RETURNED');\n       |                             ^\n    447|     expect(engine.listTasks(admin, { requestId: created.requestId, sta…\n    448|     expect(engine.listAuditLogs(admin, created.requestId).map((audit) …\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯"
    },
    {
      "mutantId": "MUT-AW-RESUBMIT-SKIP-RESET",
      "description": "RETURNED 再提出時の task reset 欠落",
      "killed": true,
      "exitCode": 1,
      "durationMs": 1064,
      "command": "pnpm exec vitest run tests/acceptance/approval-engine.acceptance.test.ts -t AW-REQ-RETURN-01",
      "stdoutTail": "RUN  v3.2.4 /home/runner/work/ae-framework-test-05-Approval-Workflow-Service/ae-framework-test-05-Approval-Workflow-Service\n\n ❯ tests/acceptance/approval-engine.acceptance.test.ts (14 tests | 1 failed | 13 skipped) 22ms\n   ↓ Approval Workflow Acceptance > AW-ACC-01: ANY step simultaneous approvals complete step once without duplicate next-step tasks\n   ↓ Approval Workflow Acceptance > AW-ACC-02: a single reject moves request to REJECTED and closes all pending tasks\n   ↓ Approval Workflow Acceptance > AW-ACC-03: submit/decide operations are rejected after terminal state\n   ↓ Approval Workflow Acceptance > AW-AUTH-001: request detail is visible only to requester assignee and admin\n   ↓ Approval Workflow Acceptance > AW-AUTH-002: task decision is denied for non-assignee\n   ↓ Approval Workflow Acceptance > AW-TENANT-001: cross-tenant access to request and task is denied\n   ↓ Approval Workflow Acceptance > AW-REQ-EDIT-01: request update is allowed in DRAFT and denied in IN_REVIEW\n   ↓ Approval Workflow Acceptance > AW-REQ-002: submit validates required fields (title/amount/currency)\n   × Approval Workflow Acceptance > AW-REQ-RETURN-01: RETURN moves request to RETURNED and resubmit regenerates first-step tasks 21ms\n     → expected [] to have a length of 2 but got +0\n   ↓ Approval Workflow Acceptance > AW-WF-003: fixed workflow/version remains unchanged on resubmit after RETURN\n   ↓ Approval Workflow Acceptance > AW-AUD-001: withdraw/cancel actions are recorded in audit logs\n   ↓ Approval Workflow Acceptance > AW-WF-002: highest priority active workflow is selected on submit\n   ↓ Approval Workflow Acceptance > AW-WF-010: submit is rejected when approver selector resolves no users\n   ↓ Approval Workflow Acceptance > AW-ACC-04: audit log keeps submit to final decision trace\n\n Test Files  1 failed (1)\n      Tests  1 failed | 13 skipped (14)\n   Start at  17:07:15\n   Duration  378ms (transform 107ms, setup 0ms, collect 110ms, tests 22ms, environment 0ms, prepare 80ms)\n\n\n::error file=/home/runner/work/ae-framework-test-05-Approval-Workflow-Service/ae-framework-test-05-Approval-Workflow-Service/tests/acceptance/approval-engine.acceptance.test.ts,title=tests/acceptance/approval-engine.acceptance.test.ts > Approval Workflow Acceptance > AW-REQ-RETURN-01%3A RETURN moves request to RETURNED and resubmit regenerates first-step tasks,line=461,column=26::AssertionError: expected [] to have a length of 2 but got +0%0A%0A- Expected%0A+ Received%0A%0A- 2%0A+ 0%0A%0A ❯ tests/acceptance/approval-engine.acceptance.test.ts:461:26%0A%0A",
      "stderrTail": "⎯⎯⎯⎯⎯⎯⎯ Failed Tests 1 ⎯⎯⎯⎯⎯⎯⎯\n\n FAIL  tests/acceptance/approval-engine.acceptance.test.ts > Approval Workflow Acceptance > AW-REQ-RETURN-01: RETURN moves request to RETURNED and resubmit regenerates first-step tasks\nAssertionError: expected [] to have a length of 2 but got +0\n\n- Expected\n+ Received\n\n- 2\n+ 0\n\n ❯ tests/acceptance/approval-engine.acceptance.test.ts:461:26\n    459| \n    460|     const pendingAfter = engine.listTasks(admin, { requestId: created.…\n    461|     expect(pendingAfter).toHaveLength(2);\n       |                          ^\n    462|   });\n    463| \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯"
    }
  ]
}